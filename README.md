# resu ‚ú®

**resu** is a TypeScript/JavaScript library designed for unified result (success/error) handling, logging, flow control, and safe code execution. It is built around the idea of "explicit results" (Result) and provides convenient utilities:

1. `Result` ‚Äî a core module for describing and creating two types of outcomes: "Success" (`Ok`) and "Error" (`Error`).

2. `Try` ‚Äî a module for safely running synchronous and asynchronous operations with error interception, returning results in `Result` format.

3. `Flow` ‚Äî a module that allows you to "match" the obtained result with given handlers (`SyncMatch` and `AsyncMatch`).

4. `Logger` ‚Äî a module for logging `Result`.



## üöÄ Quick Start

Install the library:

```bash
npm install resu
# or
yarn add resu
```

### üèóÔ∏è Create First Program

–°–æ–∑–¥–∞–π—Ç–∞ –≤–∞—à—É –ø–µ—Ä–≤—É—é –ø—Ä–æ–≥—Ä–∞–º–º—É, –∫–æ—Ç–æ—Ä–∞—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `Result`:

```ts
import { Flow, Result } from 'resu'
import { someService } from 'some-service'

export type SomeEntity = {
	id: number,
	name: string,
}

export const validateSome = Flow.Function.Sync((some: SomeEntity) => {
	if (typeof some.id !== 'number') {
		return Result.Error({ tag: 'InvalidIdType' })
	}
	if (typeof some.name !== 'string') {
		return Result.Error({ tag: 'InvalidNameType' })
	}
	return Result.OkFrom(some)
})

export const updateSome = Flow.Function.Async(async (some: SomeEntity) => {
	const someExist = someService.existById(some.id)
	if (!someExist) return Result.Error({ tag: 'NotFound' })

	const validate = validateSome(some)
	if (validate.status === 'error') return Result.Error({ tag: 'InvalidEntity' })

	const update = Flow.Try.Async(() => someService.updateSome(okResult.data))
	if (update.status === 'error') return Result.Error({ tag: 'UpdateError' })

	return Result.Ok()
}
```


## Result ‚öôÔ∏è

`Result` ‚Äî —ç—Ç–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –∏–º—ë–Ω, –ª–µ–∂–∞—â–µ–µ –≤ –æ—Å–Ω–æ–≤–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏. –û–Ω–æ —Å–æ–¥–µ—Ä–∂–∏—Ç
–º–µ—Ç–æ–¥—ã –∏ —É—Ç–∏–ª–∏—Ç–∞—Ä–Ω—ã–µ —Ç–∏–ø—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ `Result`.
–í –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–ª—É—á–∞–µ–≤ –∫–∞–∂–¥–æ–º—É –º–µ—Ç–æ–¥—É —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –æ–¥–Ω–æ–∏–º—ë–Ω–Ω—ã–π —É—Ç–∏–ª–∏—Ç–∞—Ä–Ω—ã–π —Ç–∏–ø.

### üõ† –ß–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –º–µ—Ç–æ–¥—ã

* ‚úÖ `Result.Ok`, `Result.OkFrom` ‚Äî –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —É—Å–ø–µ—à–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤.
* ‚ùå `Result.Error`, `Result.ErrorFrom` ‚Äî –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Å –æ—à–∏–±–∫–æ–π.

---

### üß± –°–æ–∑–¥–∞–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤

–°–æ–∑–¥–∞–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ `Result` –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–π
`Result.Ok()` –∏ `Result.Error()`. –û–±–µ –ø—Ä–∏–Ω–∏–º–∞—é—Ç –æ–±—ä–µ–∫—Ç
—Å –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º–∏ –ø–æ–ª—è–º–∏:

* **`data`** ‚Äî –¥–∞–Ω–Ω—ã–µ, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–µ–π;
* **`tag`** ‚Äî –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–π —Ç–µ–≥, –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä—É—é—â–∏–π —Ç–∏–ø —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞;
* **`log`** ‚Äî —Ñ–ª–∞–≥ (`boolean`), —É–∫–∞–∑—ã–≤–∞—é—â–∏–π, —Å–ª–µ–¥—É–µ—Ç –ª–∏ –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç.

–ú–µ—Ç–æ–¥—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –æ–±—ä–µ–∫—Ç `Result` —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ –ø–æ–ª—è–º–∏:

1. **`status`** ‚Äî —Å—Ç–∞—Ç—É—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (`'ok'` –∏–ª–∏ `'error'`), –æ–ø—Ä–µ–¥–µ–ª—è–µ–º—ã–π
   —Ñ–∞–±—Ä–∏—á–Ω—ã–º–∏ –º–µ—Ç–æ–¥–∞–º–∏.
2. **`data`** ‚Äî –ø–æ–ª–µ–∑–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ (–∏–ª–∏ `null`, –µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–∞).
3. **`tag`** ‚Äî —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π —Ç–µ–≥ (–∏–ª–∏ `null`, –µ—Å–ª–∏ –Ω–µ –∑–∞–¥–∞–Ω).

---

### üç¨ –°–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–π —Å–∞—Ö–∞—Ä

–ú–µ—Ç–æ–¥—ã `Result.OkFrom` –∏ `Result.ErrorFrom` ‚Äî —ç—Ç–æ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–π —Å–∞—Ö–∞—Ä,
–ø–æ–∑–≤–æ–ª—è—é—â–∏–π —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç, –ø–µ—Ä–µ–¥–∞–≤–∞—è –∑–Ω–∞—á–µ–Ω–∏–µ –ø–µ—Ä–≤—ã–º –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º –∏,
–ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏, —Ç–µ–≥ ‚Äî –≤—Ç–æ—Ä—ã–º. –ï—Å–ª–∏ –ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —É–∂–µ —è–≤–ª—è–µ—Ç—Å—è
—ç–∫–∑–µ–º–ø–ª—è—Ä–æ–º `Result`, –∏–∑ –Ω–µ–≥–æ –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ `data`.

```ts
const res = Result.Ok({ data: 'foo', tag: 'SomeTag' });
const err = Result.ErrorFrom(res);
// => { status: 'error', data: 'foo' } ‚Äî —Ç–µ–≥ –Ω–µ –Ω–∞—Å–ª–µ–¥—É–µ—Ç—Å—è
```

---

### üìã –í—Å–µ –º–µ—Ç–æ–¥—ã –∏ —Ç–∏–ø—ã

–ö—Ä–æ–º–µ —É–ø–æ–º—è–Ω—É—Ç—ã—Ö –º–µ—Ç–æ–¥–æ–≤, —Å—É—â–µ—Å—Ç–≤—É—é—Ç –∏ –¥—Ä—É–≥–∏–µ:

> **–í–∞–∂–Ω–æ**: –ú–Ω–æ–≥–∏–µ —É—Ç–∏–ª–∏—Ç—ã –∏–º–µ—é—Ç –¥–≤–æ–π—Å—Ç–≤–µ–Ω–Ω—É—é –ø—Ä–∏—Ä–æ–¥—É ‚Äî –æ–Ω–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã
> –∫–∞–∫ —Ç–∏–ø—ã –∏ –∫–∞–∫ *runtime-—Ñ—É–Ω–∫—Ü–∏–∏*, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ–≤–µ—Ä—è—é—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ
> –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∏ —Å—É–∂–∞—é—Ç —Ç–∏–ø—ã.


#### ‚úÖ –ì—Ä—É–ø–ø–∞ "Ok":
| üß© –ò–º—è –º–µ—Ç–æ–¥–∞ –∏–ª–∏ —Ç–∏–ø–∞ | üì¶ –¢–∏–ø —Å—É—â–Ω–æ—Å—Ç–∏ | ‚öôÔ∏è –°–∏–≥–Ω–∞—Ç—É—Ä–∞                                          | üìñ –û–ø–∏—Å–∞–Ω–∏–µ                                                      |
| ---------------------- | --------------- | ------------------------------------------------------ | ---------------------------------------------------------------- |
| `Ok`                   | —Ç–∏–ø + –º–µ—Ç–æ–¥     | `Result.Ok<[Data][, Tag]>` <br> `Result.Ok([params])`  | ‚ùå –°–æ–∑–¥–∞–µ—Ç —É—Å–ø–µ—à–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –∏ —Ç–µ–≥–æ–º. |
| `IsOk`                 | —Ç–∏–ø + –º–µ—Ç–æ–¥     | `Result.IsOk<Value>` <br> `Result.IsOk(value)`         | üîç –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω—ã–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º.         |
| `OkFrom`               | —Ç–∏–ø + –º–µ—Ç–æ–¥     | `Result.OkFrom<Value>` <br> `Result.OkFrom(value)`     | üîÅ –°–æ–∑–¥–∞–µ—Ç —É—Å–ø–µ—à–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏–∑ –ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è.           |
| `TaggedOk`             | —Ç–∏–ø             | ---                                                    | üè∑Ô∏è –£—Å–ø–µ—à–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å —Ç–µ–≥–æ–º –∏ –±–µ–∑ –¥–∞–Ω–Ω—ã—Ö.                      |
| `AnyOk`                | —Ç–∏–ø             | ---                                                    | üß© –£—Å–ø–µ—à–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å –ª—é–±—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –∏ –ª—é–±—ã–º —Ç–µ–≥–æ–º.            |

#### ‚ùå –ì—Ä—É–ø–ø–∞ "Error":
| üß© –ò–º—è –º–µ—Ç–æ–¥–∞ –∏–ª–∏ —Ç–∏–ø–∞ | üì¶ –¢–∏–ø —Å—É—â–Ω–æ—Å—Ç–∏ | ‚öôÔ∏è –°–∏–≥–Ω–∞—Ç—É—Ä–∞                                               | üìñ –û–ø–∏—Å–∞–Ω–∏–µ                                                       |
| ---------------------- | --------------- | ----------------------------------------------------------- | ----------------------------------------------------------------- |
| `Error`                | —Ç–∏–ø + –º–µ—Ç–æ–¥     | `Result.Error<[Data][, Tag]>` <br> `Result.Error([params])` | ‚ùå –°–æ–∑–¥–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å –æ—à–∏–±–∫–æ–π —Å –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –∏ —Ç–µ–≥–æ–º. |
| `IsError`              | —Ç–∏–ø + –º–µ—Ç–æ–¥     | `Result.IsError<Value>` <br> `Result.IsError(value)`        | üîç –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –æ—à–∏–±–∫–æ–π.                       |
| `ErrorFrom`            | —Ç–∏–ø + –º–µ—Ç–æ–¥     | `Result.ErrorFrom<Value>` <br> `Result.ErrorFrom(value)`    | üîÅ –°–æ–∑–¥–∞–µ—Ç –æ—à–∏–±–∫—É –∏–∑ –ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è.                        |
| `TaggedError`          | —Ç–∏–ø             | ---                                                         | üè∑Ô∏è –û—à–∏–±–∫–∞ —Å —Ç–µ–≥–æ–º –∏ –±–µ–∑ –¥–∞–Ω–Ω—ã—Ö.                                   |
| `AnyError`             | —Ç–∏–ø             | ---                                                         | üß© –û—à–∏–±–∫–∞ —Å –ª—é–±—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –∏ –ª—é–±—ã–º —Ç–µ–≥–æ–º.                         |

#### üîÄ –û–±—â–µ–µ:
| üß© –ò–º—è –º–µ—Ç–æ–¥–∞ –∏–ª–∏ —Ç–∏–ø–∞ | üì¶ –¢–∏–ø —Å—É—â–Ω–æ—Å—Ç–∏ | ‚öôÔ∏è –°–∏–≥–Ω–∞—Ç—É—Ä–∞                                          | üìñ –û–ø–∏—Å–∞–Ω–∏–µ                                                  |
| ---------------------- | --------------- | ------------------------------------------------------ | ------------------------------------------------------------ |
| `IsResult`             | —Ç–∏–ø + –º–µ—Ç–æ–¥     | `Result.IsResult<Value>` <br> `Result.IsResult(value)` | üîç –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ `Result`.                 |
| `Any`                  | —Ç–∏–ø             | ---                                                    | üîÄ –†–µ–∑—É–ª—å—Ç–∞—Ç –ª—é–±–æ–≥–æ —Ç–∏–ø–∞: —É—Å–ø–µ—Ö (`Ok`) –∏–ª–∏ –æ—à–∏–±–∫–∞ (`Error`). |

